# 📋 健康檢查按鈕功能驗收標準作業程序 (SOP)

---

## 1. 功能簡介 (Feature Overview)

本文件用於驗收「**📋 健康檢查**」按鈕的前端實作是否完整且功能正常。

**預期功能：**
- 在聊天介面的檔案上傳按鈕旁邊，應顯示一個「📋 健康檢查」按鈕
- 點擊該按鈕後，應在**新的瀏覽器分頁**中開啟 `/status` 頁面
- `/status` 頁面應顯示系統健康狀態儀表板

**驗收範圍：**
- ✅ 按鈕是否在正確位置顯示
- ✅ 按鈕點擊後是否正確導向 `/status` 路徑
- ✅ 是否在新分頁開啟（而非當前分頁）
- ✅ `/status` 頁面是否正常載入並顯示健康檢查資訊

---

## 2. 驗收前準備 (Pre-check Requirements)

### 2.1 環境確認
- [ ] 確認前端應用已部署至 GitHub + Cloudflare（或 Replit 預覽環境）
- [ ] 確認可以正常訪問聊天介面首頁
- [ ] 準備測試用瀏覽器（建議使用 Chrome 或 Edge）

### 2.2 測試工具準備
- [ ] 開啟瀏覽器開發者工具（F12 或右鍵「檢查」）
- [ ] 準備記錄驗收結果的文件或表格

### 2.3 預期結果參考
- **按鈕位置：** 在檔案上傳按鈕（📎 上傳檔案）的**右側或下方**
- **按鈕文字：** 「📋 健康檢查」或「📋 健康狀態檢查」
- **目標頁面：** `/status` 路徑，顯示系統狀態資訊

---

## 3. 驗收步驟 (Step-by-step Acceptance Test Instructions)

### 步驟 1：訪問聊天介面首頁
1. 開啟瀏覽器
2. 輸入前端應用網址（例如：`https://your-app.pages.dev` 或 Replit 預覽 URL）
3. 等待頁面完全載入

**預期結果：** 
- 頁面正常顯示聊天介面
- 可以看到輸入框和發送按鈕

---

### 步驟 2：確認健康檢查按鈕存在
1. 在聊天介面中，尋找「📎 上傳檔案」按鈕
2. 在該按鈕的**附近區域**（通常是右側或下方）尋找「📋 健康檢查」按鈕

**驗收檢查點：**
- [ ] 是否能看到「📋 健康檢查」按鈕？
- [ ] 按鈕是否包含 📋 圖示？
- [ ] 按鈕文字是否清晰可讀？
- [ ] 按鈕樣式是否與介面設計一致？

**截圖建議：** 此時應截圖記錄按鈕的顯示狀態

---

### 步驟 3：測試按鈕點擊行為
1. 點擊「📋 健康檢查」按鈕
2. 觀察瀏覽器的反應

**驗收檢查點：**
- [ ] 是否開啟了**新的分頁**？（而非在當前分頁跳轉）
- [ ] 新分頁的網址是否為 `/status` 路徑？
  - 例如：`https://your-app.pages.dev/status`
- [ ] 是否在 1-2 秒內成功載入頁面？

**如何確認是新分頁：**
- 原始聊天介面分頁應保持不變
- 瀏覽器應顯示至少 2 個分頁

---

### 步驟 4：驗證 `/status` 頁面內容
1. 切換到新開啟的 `/status` 分頁
2. 檢查頁面內容

**驗收檢查點：**
- [ ] 頁面標題是否包含「健康」、「狀態」或「Health」等關鍵字？
- [ ] 頁面是否顯示系統狀態資訊？（例如：API 狀態、資料庫連線等）
- [ ] 頁面是否正常渲染，無明顯排版錯誤？
- [ ] 是否有任何錯誤訊息或 404 頁面？

**預期顯示內容範例：**
```
🩺 系統健康狀態檢查
✅ API 服務：正常運行
✅ 資料庫連線：正常
⏱ 回應時間：< 100ms
```

---

### 步驟 5：瀏覽器控制台檢查（進階）
1. 在 `/status` 頁面按 F12 開啟開發者工具
2. 切換到「Console（控制台）」分頁
3. 檢查是否有錯誤訊息

**驗收檢查點：**
- [ ] 控制台是否**沒有紅色錯誤訊息**？
- [ ] 是否沒有 404 或 500 網路請求錯誤？
- [ ] 頁面資源（CSS、JS）是否都成功載入？

---

### 步驟 6：重複測試驗證穩定性
1. 關閉 `/status` 分頁
2. 回到聊天介面
3. 再次點擊「📋 健康檢查」按鈕
4. 確認功能可重複正常運作

**驗收檢查點：**
- [ ] 第二次點擊是否仍然正常開啟新分頁？
- [ ] `/status` 頁面內容是否一致？
- [ ] 是否沒有卡頓或延遲問題？

---

## 4. 驗收通過標準 (Pass Criteria for Each Step)

### ✅ 完全通過（PASS）條件
**所有以下項目必須全部符合：**

1. **按鈕可見性**
   - 「📋 健康檢查」按鈕在聊天介面中清晰顯示
   - 按鈕位置在檔案上傳按鈕附近（右側或下方）

2. **點擊行為正確**
   - 點擊後開啟**新分頁**（非當前分頁跳轉）
   - 新分頁網址為 `/status` 路徑

3. **頁面載入成功**
   - `/status` 頁面正常顯示健康狀態資訊
   - 無 404、500 或其他錯誤頁面
   - 頁面內容符合預期（包含系統狀態資訊）

4. **穩定性驗證**
   - 功能可重複執行，無異常
   - 控制台無關鍵錯誤訊息

### ❌ 不通過（FAIL）條件
**任一項目發生即視為驗收失敗：**

- 按鈕不存在或不可見
- 點擊後在當前分頁跳轉（而非新分頁）
- 網址導向錯誤（非 `/status` 路徑）
- `/status` 頁面顯示 404 或空白頁
- 控制台出現關鍵錯誤導致功能失效
- 功能無法重複執行

---

## 5. 驗收不通過處理指引 (Troubleshooting Tips)

### 問題 1：找不到「📋 健康檢查」按鈕

**可能原因：**
- 前端代碼未正確部署
- 按鈕被 CSS 隱藏或遮蓋
- 元件未正確渲染

**排查步驟：**
1. 按 F12 開啟開發者工具
2. 切換到「Elements（元素）」分頁
3. 按 `Ctrl+F` 搜尋「健康檢查」或「health」關鍵字
4. 檢查該元素是否存在於 DOM 中
5. 如果存在但不可見，檢查 CSS `display` 或 `visibility` 屬性

**建議動作：**
- 確認最新代碼已成功部署至 Cloudflare Pages
- 清除瀏覽器快取後重新載入（Ctrl+Shift+R）
- 檢查 ChatInterface.vue 檔案中是否包含按鈕代碼

---

### 問題 2：點擊按鈕後沒有反應

**可能原因：**
- JavaScript 事件綁定失敗
- 路由配置錯誤
- 按鈕 `@click` 事件未正確實作

**排查步驟：**
1. 開啟開發者工具 → Console 分頁
2. 點擊按鈕，觀察是否有錯誤訊息
3. 檢查是否有 `goToHealthCheck` 函數相關錯誤
4. 確認 `window.open("/status", "_blank")` 是否被瀏覽器阻擋

**建議動作：**
- 檢查瀏覽器是否啟用「封鎖彈出式視窗」功能
- 暫時允許該網站的彈出視窗
- 確認 Vue 事件綁定語法正確：`@click="goToHealthCheck"`

---

### 問題 3：開啟的不是新分頁（在當前分頁跳轉）

**可能原因：**
- 代碼使用 `this.$router.push()` 而非 `window.open()`
- `target="_blank"` 參數缺失

**排查步驟：**
1. 檢查 ChatInterface.vue 中的 `goToHealthCheck` 方法
2. 確認使用的是 `window.open("/status", "_blank")`
3. 而非 `this.$router.push('/status')`

**建議動作：**
- 修改代碼為：
  ```javascript
  goToHealthCheck() {
    window.open("/status", "_blank");
  }
  ```

---

### 問題 4：`/status` 頁面顯示 404

**可能原因：**
- Vue Router 路由未配置 `/status` 路徑
- StatusPage.vue 元件缺失
- 部署時路由設定錯誤

**排查步驟：**
1. 檢查 `router/index.js` 是否包含：
   ```javascript
   { path: '/status', component: StatusPage }
   ```
2. 確認 `StatusPage.vue` 檔案存在於 `components` 資料夾
3. 檢查 Cloudflare Pages 的 SPA 路由設定

**建議動作：**
- 確認所有路由配置已正確提交並部署
- 在本地環境測試 `/status` 是否可訪問
- 如果本地正常但部署後 404，檢查 `_redirects` 或 `vercel.json` 配置

---

### 問題 5：控制台顯示大量錯誤

**可能原因：**
- 元件導入路徑錯誤
- API 請求失敗
- 依賴套件缺失

**排查步驟：**
1. 記錄所有紅色錯誤訊息
2. 逐一檢查錯誤來源檔案
3. 確認 `import` 語句路徑正確
4. 檢查是否有套件安裝遺漏

**建議動作：**
- 執行 `npm install` 確保所有依賴已安裝
- 檢查 `import HealthStatus from '../components/HealthStatus.vue'` 路徑是否正確
- 如果是 API 錯誤，確認後端服務正常運行

---

## 6. 附加檢查項 (Optional Advanced Checks)

### 6.1 跨瀏覽器相容性測試
- [ ] Chrome 瀏覽器測試
- [ ] Firefox 瀏覽器測試
- [ ] Edge 瀏覽器測試
- [ ] Safari 瀏覽器測試（如適用）

### 6.2 響應式設計驗證
- [ ] 桌面版顯示正常（寬度 > 1024px）
- [ ] 平板版顯示正常（寬度 768-1024px）
- [ ] 手機版顯示正常（寬度 < 768px）
- [ ] 按鈕在小螢幕不會被遮擋或變形

### 6.3 無障礙性檢查（Accessibility）
- [ ] 按鈕可使用鍵盤 Tab 鍵導航
- [ ] 按下 Enter 鍵可觸發點擊事件
- [ ] 按鈕具有適當的 `aria-label` 屬性
- [ ] 色盲模式下按鈕仍可辨識

### 6.4 效能檢查
- [ ] 按鈕載入時間 < 500ms
- [ ] 點擊到開啟新分頁時間 < 1 秒
- [ ] `/status` 頁面首次渲染時間 < 2 秒
- [ ] 無記憶體洩漏（多次點擊後記憶體使用正常）

### 6.5 安全性檢查
- [ ] 開啟的新分頁無 XSS 風險
- [ ] 不會洩露敏感系統資訊
- [ ] HTTPS 連線正常（如已配置）
- [ ] 無混合內容（Mixed Content）警告

---

## 7. 驗收結果記錄範本

### 驗收資訊
- **驗收日期：** ___________
- **驗收人員：** ___________
- **測試環境：** ☐ 本地開發 ☐ Replit 預覽 ☐ Cloudflare Pages 正式環境
- **瀏覽器版本：** ___________

### 驗收結果
| 檢查項目 | 通過 | 不通過 | 備註 |
|---------|------|--------|------|
| 按鈕可見性 | ☐ | ☐ | |
| 點擊開啟新分頁 | ☐ | ☐ | |
| 導向 `/status` 路徑 | ☐ | ☐ | |
| 頁面內容正確 | ☐ | ☐ | |
| 控制台無錯誤 | ☐ | ☐ | |
| 重複測試穩定 | ☐ | ☐ | |

### 總體評價
- ☐ **驗收通過** - 所有項目符合標準
- ☐ **驗收不通過** - 需修正以下問題：

  _______________________________________
  _______________________________________
  _______________________________________

### 簽核
- **驗收人簽名：** ___________
- **開發人員簽名：** ___________
- **日期：** ___________

---

## 附錄：快速驗收檢查表

**✓ 開啟聊天介面首頁**  
**✓ 找到「📋 健康檢查」按鈕**  
**✓ 點擊按鈕**  
**✓ 確認開啟新分頁**  
**✓ 確認網址為 `/status`**  
**✓ 確認頁面正常顯示健康資訊**  
**✓ 檢查控制台無錯誤**  
**✓ 重複測試 2-3 次確認穩定**  

---

**文件版本：** v1.0  
**最後更新：** 2025-10-13  
**適用專案：** XiaoChenGuang AI 聊天介面  
